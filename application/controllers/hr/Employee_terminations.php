<?phpclass Employee_terminations extends CI_Controller{    function __construct()    {        parent::__construct();        $this->load->helper('form');        $this->load->helper(array('url', 'string'));        $this->load->model(array('hr/Mdl_termination'));       $this->load->library(array('session','form_validation','pagination'));        $this->load->helper(array('url','form','my_common_helper','string'));        $session_array = $this->session->userdata('logged_in_admin');        if (!isset($session_array)) {            redirect('admin/Login');        }    }    function set_menu()    { $data['header'] = $this->load->view('hr/templates/default_assets', '', true);        $data['sidebar'] = $this->load->view('hr/templates/hr_sidebar', '', true);        $data['footer'] = $this->load->view('hr/templates/hr_footer', '', true);        return $data;    }    function index()    {        if (has_role('add_termination')) {            $data = $this->set_menu();            $data['employees'] = $this->Mdl_termination->get_req_employee();            $data['terminaType'] = $this->Mdl_termination->get_termina_type();            $this->load->view('hr/hr_add_termination', $data);        }    }    function add_new_terminations()    {        $this->form_validation->set_rules('emp_terminatedd', 'Terminated employee', 'required|trim');        $this->form_validation->set_rules('termina_type', 'Termination type ', 'required|trim');        $this->form_validation->set_rules('termina_date', 'Termination date', 'required|trim');        $this->form_validation->set_rules('notice_dat', 'Notice date ', 'required|trim');        $this->form_validation->set_rules('descrip', 'Description', 'required|trim');        if ($this->form_validation->run() == TRUE) {            $result = $this->Mdl_termination->addterminations();            if ($result) {                exit(json_encode(array("status" => TRUE)));            } else {                exit(json_encode(array("status" => FALSE, "reason" => 'Database Error')));            }        } else {            exit(json_encode(array("status" => FALSE, 'reason'=>validation_errors())));        }    }    function get_terminations()    {        if (has_role('view_termination')) {            $data = $this->set_menu();            $data['termination'] = $this->Mdl_termination->get_terminations_by_id();            $this->load->view('hr/hr_view_emp_terminations', $data);        }    }    function delete_terminations()    {        if ($this->input->is_ajax_request()) {            $qry = $this->Mdl_termination->delete_terminations($this->input->post());            if ($qry) {                exit(json_encode(array('status' => TRUE)));            } else {                exit(json_encode(array('status' => FALSE, 'reason' => 'Please try again later..!')));            }        } else {            show_error("Unable to process the request in this way");        }    }    function get_terminations_by_id($id)    {        if (has_role('edit_termination')) {            $data = $this->set_menu();            $data['employees'] = $this->Mdl_termination->get_req_employee1();            $data['terminaType'] = $this->Mdl_termination->get_termina_type();            $data['terminations'] = $this->Mdl_termination->edit_terminations_by_id($id);            $data['status'] = $this->Mdl_termination->get_employee_status();            $data['priority'] = $this->Mdl_termination->get_priority_req();            $this->load->view('hr/hr_edit_terminations', $data);        }    }    function edit_get_terminations()    {        if ($this->input->is_ajax_request()) {            $result = $this->Mdl_termination->editterminations();            if ($result) {                exit(json_encode(array("status" => TRUE)));            } else {                exit(json_encode(array("status" => FALSE, "reason" => 'Database Error')));            }        } else {            show_error("We are unable to process this request on this way!");        }    }    function get_termination_report()    {        if (has_role('view_termination_report')) {            $data = $this->set_menu();            $data['termination'] = $this->Mdl_termination->get_terminations_by_id();            $this->load->view('hr/hr_terminations_report', $data);        }    }}?>